---
title: 惯性导航加速度矫正
---

# INS加速度计信号调节算法

## 摘要

将无人驾驶车辆定位于三维空间并准确识别其加速度，速度，位置和方向是一项非常具有挑战性和要求的任务。 用于定位的最常用系统之一是惯性导航系统，该系统使用加速度计和陀螺仪来确定物体在三维空间中的位置和方向。 惯性运动单元（IMU）中使用的加速度计非常灵敏，易受振动和冲击引起的噪音影响。 本文显示了用于从加速度计提取位置和速度的各种信号处理算法的分析结果。 本文旨在提高可靠性和准确性，克服惯性导航系统中加速度计的缺点。

## I引言

惯性导航系统（INS）是用于本地化的系统之一。 它具有各种应用程序，包括用于工业任务监视和自动化的本地化。 它也是跟踪身体活动，健康和保健的设备的组成部分。 惯性运动单元（IMU）以及磁力计等其他传感器也可用于手机中，以跟踪可用于识别用户身体活动的各种运动。 IMU还用于震动测试，以研究系统对震动和冲击的容忍度。

IMU使用三轴加速度计和三轴陀螺仪的组合，测量三维空间中物体的旋转速度和加速度。加速度计测量作用在传感器上的所有力的和导致的加速度。它用于通过对加速度进行数值积分来获得无人驾驶车辆的速度和位置。由于3轴加速度计沿着三个笛卡尔坐标轴测量加速度，因此它受到诸如重力之类的静态力和车辆运动形式的动力[1]的影响。根据传感器的方向，沿着轴线观察重力加速度的分量，并且由于车辆的实际运动而区分该分量和加速度是具有挑战性的。加速度计的另一个缺点是它对导致随机误差的微小振动非常敏感。此外，由于数值积分，这些误差会积累并导致明显的速度和位置误差[2]。

因此，使用信号调节算法来增强传感器的数据并帮助提供系统位置和方向的可靠和准确的描述是至关重要的。

本文组织如下：第II节定义了用于加速度计数据的信号调理算法，第III节包含信号调理之前的观察结果以及实施第II节中所述算法后的改进。第四部分结束本文，并讨论了执行信号调节的必要性。

## II信号调节算法

所提出的系统由四个主要的数据处理算法组成，这些算法已被用于减少加速度计上噪声的影响。

对原始加速度数据执行以下步骤。 首先，偏差移除是为了纠正任何方向上的错误；接下来应用加权移动平均滤波来平滑信号并抑制尖峰；阈值去除加速度中的任何零误差；最后，实施速度重置以减小速度和位置误差。

### A偏差移除

获得的加速度计数据是沿着笛卡尔轴解析的净加速度，并且是从作用于载体的所有力的总和的负值导出的。这些力量可以是静态的也可以是动态的。由于我们在非惯性参照系下工作，因此有必要确保重力不会影响导致运动的净力。为了保持仅沿Y轴的重力加速度，传感器的平面应该与重力方向完全垂直。

实际上，这是不可能的，因为物理条件导致传感器的取向与理想不同，并且因此重力加速度'g'可能具有沿着传感器的运动方向的分量。

![1524206824780](https://i.loli.net/2018/04/20/5ad98d487887a.png)

> 图1：传感器相对于地平面的方向

为了解决这个问题，传感器的偏移分量按照其初始方向进行计算。 打开传感器后，前500个采样保持稳定。计算这500个采样的平均值，并在随后的值中减去偏差。

### B加权移动均值滤波

由于加速度计数据固有的噪声性质，进行滤波非常重要。尽管由于存在高斯噪声，选择性频率去除是不可能的; 移动平均滤波用于平滑信号并抑制尖峰[4]。

为了精确计算距离，有必要获得没有噪音并反映传感器精确物理运动的加速度计读数。移动平均值引起的滞后随着帧长的增加而增加，因此找到用于滤波的最佳帧长是至关重要的。以下是两种广泛使用的平均滤波器：

移动平均滤波器的实现如下面的公式所示：

$avg(n) = \frac{1}{N} \sum_{k=0}^{N-1}x(n-k)$

其中avg(n)是第n个样本的移动平均滤波值，x(n)表示加速度的原始值，N表示滤波器长度。

加权移动平均滤波器的实现如下面的公式所示:

$weighted\_avg(n) = \frac{2}{N(N+1)}\sum_{k=0}^{n-1}(n-k)*x(n-k)$

其中weighted_avg(n)是第n个样本的加权移动平均滤波值，x(n)表示加速度的原始值，N表示滤波器长度。

### C阈值

当IMU保持静止时，由于随机误差的存在，加速度计输出非零加速度，可将其视为噪音。这种噪声会导致速度和位置的计算出现错误，因此必须降低。读数中存在的误差是整个范围的0.5-1％，并且具有非零平均值。在存在非零均值噪声的情况下对加速度进行积分会导致误差累积。

由于该误差不超过0.5 - 1％，我们可以设置一个合适的阈值，低于该阈值时，任何加速度值都设为零。这种技术提高了传感器静止时速度和位置测量的准确性。

理想情况下，在非加速运动期间，传感器应输出零加速度值。然而，实际上，对一个物体进行完美的非加速运动是非常困难的，并且它使得传感器产生非零的加速度值，观察到的加速度值大于随机误差。因此，可以选择大于随机误差的阈值，但是足够小以允许检测非加速运动。在这个允许的阈值范围内，我们必须保持阈值尽可能低，因为设置加速或减速时阈值会导致部分加速曲线被剪切。这会导致位置和速度计算错误。因此，选择最佳阈值非常重要。

### D零速率更新

在惯性导航系统中，如果不执行错误重置，速度和位置估计误差会累积。零速度更新是一种通过适当的阈值来检测静止状态，通过将速度重置为零来最小化速度估计中的误差的技术。这种技术广泛用于行人导航系统，因为在步行中，一只脚总是接触地面，并在另一只脚移动的同时保持静止（速度为零）一段时间，而另一只脚则移动。有效区分静止状态和非加速运动的能力使我们能够将此技术扩展到车辆运动。

只有在观察到预定数量的连续采样值为零后才能检测到静止状态。这确保零速度更新算法不会重置速度，除非可靠地检测到静态条件。速度重置减少速度和位置计算中的错误积累。

## III观察和结果

为了开发和测试我们的算法，我们使用了传感器MPU-6050，这是一个六轴（陀螺仪加速度计）MEMS MotionTracking设备。 这是一款低功耗，低成本和高性能的设备，设计用于智能手机，平板电脑，可穿戴传感器和无人驾驶车辆。 它包含一个3轴加速度计和一个3轴陀螺仪。

车载加速度计具有+/- 2g，+/- 4g，+/- 8g和+/- 16g（g = 9.8m / s2）的用户可编程全量程范围。为了实现我们的算法，我们将其编程为+/- 2g模式以提供最大灵敏度。它具有集成的16位ADC，可在不使用多路复用器的情况下同时采样加速度计。该传感器能够以1 kHz采样加速度计并通过I2C接口发送数据。

以下是在对MPU-6050进行大量测试后得出的观察结果和结果：

*A偏差移除*

![](https://i.loli.net/2018/04/20/5ad9938fc2289.png)

> 图2：消除偏移对加速度的影响

如图2所示，该装置的初始方向与重力加速度不完全正交, 这会导致加速度曲线向上移动一个重力分量（无偏移量消除)。在应用偏移消除技术时，可以使该组件的效果无效。

*B加权移动平均滤波*

![](https://i.loli.net/2018/04/20/5ad9944d253a1.png)

> 图3：平均滤波器的帧长度对加速度的影响

对移动平均滤波器进行了各种帧长的测试。从图3可以推断，帧长度的增加会降低对原始数据变化的响应度并增加滞后。 但是，如上图所示，非常小的帧长度不能消除原始数据的波动。

在考虑滤波器引起的滞后和响应率之间的折衷时，凭经验发现，在帧长度为10时，平均滤波器表现最佳。

![](https://i.loli.net/2018/04/20/5ad994baa1c60.png)

> 图4：比较加权平均和平均滤波器对加速度的影响

如图4所示，与移动平均滤波器相比，加权移动平均滤波器进一步改善了对原始数据变化的响应性。 根据以上推论，在移动平均滤波器上选择了加权移动平均滤波器。

*C阈值*

![](https://i.loli.net/2018/04/20/5ad9952d5b767.png)

> 图6：没有阈值的噪声对加速度的影响

如图6所示，在样本号1-601和2801-3000之间的数据中存在噪声。

![](https://i.loli.net/2018/04/20/5ad9957a7c956.png)

> 图7：适当的阈值对加速度的影响

阈值被选择为使得随机误差（样本1至1000）被移除，但仍然检测到非加速运动（1500至2500）。在应用这个适当的阈值之后，与图6相比，可以在图7中观察到噪声尖峰的显着降低。

![](https://i.loli.net/2018/04/20/5ad996110a169.png)

> 图8：在加速度上应用高阈值的效果

从图8可以看出，由于应用了高阈值，因此在1001-1201附近的一部分加速度峰值和在2601-2801附近的一部分减速峰值正在被限幅。 这会导致数值积分后对速度和位置的错误估计。

*D零速度更新算法*

![](https://i.loli.net/2018/04/20/5ad996641f8db.png)

> 图9：非加速运动和休息期间的加速度数据

该图表示传感器在样本编号37-73和145-181之间经历非加速运动并且在样本编号181-217之间保持静止时的运动。据观察，非加速运动期间的加速度值在总加速度范围的2-8％的范围内。而且，在静止状态下，阈值确保加速度值等于零。我们利用了非加速运动和静止条件的加速度值范围之间的差异来应用零速度更新算法。

![](https://i.loli.net/2018/04/20/5ad996ff6c7be.png)

> 图10：零速度更新算法对速度的影响

该图显示了对应于图9中所示的加速度值的速度曲线。 可以看出，在应用零速度更新算法之后，速度在样本编号181-217之间重置为零。 通过在静止状态下将速度重置为零，可以避免在距离计算中累积显着的误差。

## IV结论

由于原始加速度值的波动和系统运行的实际条件，因此在加速度计数据上使用适当的信号调节算法势在必行。上面提到的信号调节算法提高了有效估算位置和速度的能力，从而使INS更加可靠地工作。

## 注释：

